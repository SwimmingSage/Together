<!DOCTYPE html>
<html>

  <head>
    <title>Together</title>
    <link rel='stylesheet' href='/stylesheets/navbar.css' />
    <link rel='stylesheet' href='/stylesheets/joingoal.css' />
    <link rel='stylesheet' href='/stylesheets/base.css' />
    <script src="https://use.fontawesome.com/9ee4ba5902.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/javascripts/joingoal.js"></script>
    <script src="/javascripts/logoutajax.js"></script>
  </head>


    <body>

    <div id="navbar">
        <a href="/loginhome" id="together">Together</a>
        <ul class="navbarButtons">
          <li class="levelinfo" id="level">Lvl: <%= user.level %></li>
          <li class="levelinfo" id="points"><%= user.points +" / "+ user.points_to_levelup+ " pts" %></li>
          <a href="/yourgoals">
            <li class="navButton">Your Goals</li>
          </a>
          <a href="/newgoal">
            <li class="navButton">New Goal</li>
          </a>
          <a href="/joingoal">
            <li class="navButton" id="currentpagenav">Join Goal</li>
          </a>
          <button class="navButtonButton" id="logout">
            <li class="navButton">Logout</li>
          </button>
        </ul>
    </div>

    <h1 id="heading">Join Others on a Journey</h1>

    <!--
    <div id="columnleft">
      <ul>
        <li id="loseweightgoal">Lose Weight Goals</li>
        <li id="breakhabitgoal">Break Habit Goals</li>
        <li id="formhabitgoal">Forming Habit Goals</li>
        <li id="learnskillgoal">Learn Skill Goals</li>
        <li id="fitnessgoal">Fitness Goals</li>
        <li id="uniquegoal">Unique User Goals</li>
      </ul>
    </div>
    -->
    <div class="joingoalselect" id="columnleft">
      <ul>
        <li id="loseweightgoal">Lose Weight Goals</li>
        <li id="breakhabitgoal">Break Habit Goals</li>
        <li id="formhabitgoal">Forming Habit Goals</li>
      </ul>
    </div>

    <div class="joingoalselect" id="columnright">
      <ul>
        <li id="learnskillgoal">Learn Skill Goals</li>
        <li id="fitnessgoal">Fitness Goals</li>
        <li id="uniquegoal">Unique User Goals</li>
      </ul>
    </div>

    <% for(i = 0; i < goaltypes.length;i++) { %>
      <div class = "goalbodies" id="<%= goaltypes[i] %>goals">
        <button class="goback">Go Back</button>
      <% for(a = 0; a < userlist.length; a++) { %>
        <% if(userlist[a].username !== user.username) { %>
          <% for(b = 0; b < userlist[a].goals.length; b++) { %>
            <% if(userlist[a].goals[b].goal_type === goaltypes[i]) { %>
              <p id="<%= userlist[a].username %><%= userlist[a].goals[b].goal_name.replace(/[\s']/g,'') %>info"><%= userlist[a].firstname %>'s goal to <%= userlist[a].goals[b].goal_name %> <span class="right">Lvl: <%= userlist[a].level %>&nbsp;&nbsp;&nbsp; <%= userlist[a].goals[b].streak %>&nbsp;<i class="fa fa-free-code-camp fa" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<i class="fa fa-plus" id="othershowmore" aria-hidden="true"></i></span></p>
              <!-- Other users tasks -->
              <div class="othertasks" id="<%= userlist[a].username %><%= userlist[a].goals[b].goal_name.replace(/[\s']/g,'') %>tasks">
              <% for(c = 0; c < userlist[a].goals[b].tasks.length; c++) { %>
                <% if(userlist[a].goals[b].tasks[c].achieved) { %>
                  <p class="othertaskdone" id="<%= userlist[a].username.replace(/[\s']/g,'') %><%= userlist[a].goals[b].goal_name.replace(/[\s']/g,'') %><%= userlist[a].goals[b].tasks[c].name.replace(/[\s']/g,'') %>done"><i class="fa fa-check-square-o fa-lg"></i><%= userlist[a].goals[b].tasks[c].name %>&nbsp;&nbsp;&nbsp;&nbsp;(<%= userlist[a].goals[b].tasks[c].points %> pts)</p>
                <% } else { %>
                  <p class="othertask" id="<%= userlist[a].username.replace(/[\s']/g,'') %><%= userlist[a].goals[b].goal_name.replace(/[\s']/g,'') %><%= userlist[a].goals[b].tasks[c].name.replace(/[\s']/g,'') %>"><i class="fa fa-square-o fa-lg" aria-hidden="true"></i><%= userlist[a].goals[b].tasks[c].name %>&nbsp;&nbsp;&nbsp;&nbsp;(<%= userlist[a].goals[b].tasks[c].points %> pts)</p>
                <% } %>
              <% } %>
              <div class="bottomborder"><p class="goaladdedtext"></p></div>
              <button class="addgoal">Add Goal</button>
              </div>
            <!-- End of other users tasks -->
            <% } %>
          <% } %>
        <% } %>
      <% } %>
      </div>
    <% } %>













  </body>
</html>